#!/bin/bash
# apt: gpg

set -eu

usage() {
  cat <<EOF >&2
USAGE: $0 PLAINTEXT
    print encrypted PLAINTEXT
EOF
  exit 1
}
main() {
  local id
  id=$(gpg-select) || exit
  local -a gpg=(gpg)
  gpg+=(--armor)
  gpg+=(--output -)
  gpg+=(--recipient "$id")
  "${gpg[@]}" --encrypt "$1"
}

(($# == 1)) || usage
main "$@"
